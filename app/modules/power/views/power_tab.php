	<h2 data-i18n="nav.listings.power"></h2>
	
	<div id="power-msg" data-i18n="listing.loading" class="col-lg-12 text-center"></div>
	
	<div id="power-view" class="row hide">
		<div class="col-md-4">
			<table>
			<table class="table table-striped">
				<tr>
					<th data-i18n="power.active_profile"></th>
					<td id="power-active_profile"></td>
				</tr>
				<tr>
					<th data-i18n="power.schedule"></th>
					<td id="power-schedule"></td>
				</tr>
				<tr>
					<th data-i18n="power.sleep_count"></th>
					<td id="power-sleep_count"></td>
				</tr>
				<tr>
					<th data-i18n="power.dark_wake_count"></th>
					<td id="power-dark_wake_count"></td>
				</tr>
				<tr>
					<th data-i18n="power.user_wake_count"></th>
					<td id="power-user_wake_count"></td>
                </tr>
			</table>
                <h2 data-i18n="power.power_settings"></h2>
			<table class="table table-striped">
				<tr>
					<th data-i18n="power.standbydelay"></th>
					<td id="power-standbydelay"></td>
				</tr>
				<tr>
					<th data-i18n="power.standby"></th>
					<td id="power-standby"></td>
				</tr>
				<tr>
					<th data-i18n="power.womp"></th>
					<td id="power-womp"></td>
				</tr>
				<tr>
					<th data-i18n="power.halfdim"></th>
					<td id="power-halfdim"></td>
				</tr>
				<tr>
					<th data-i18n="power.hibernatefile"></th>
					<td id="power-hibernatefile"></td>
				</tr>
				<tr>
					<th data-i18n="power.gpuswitch"></th>
					<td id="power-gpuswitch"></td>
				</tr>
				<tr>
					<th data-i18n="power.sms"></th>
					<td id="power-sms"></td>
				</tr>
				<tr>
					<th data-i18n="power.networkoversleep"></th>
					<td id="power-networkoversleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.disksleep"></th>
					<td id="power-disksleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.sleep"></th>
					<td id="power-sleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.autopoweroffdelay"></th>
					<td id="power-autopoweroffdelay"></td>
				</tr>
				<tr>
					<th data-i18n="power.hibernatemode"></th>
					<td id="power-hibernatemode"></td>
				</tr>
				<tr>
					<th data-i18n="power.autopoweroff"></th>
					<td id="power-autopoweroff"></td>
				</tr>
				<tr>
					<th data-i18n="power.ttyskeepawake"></th>
					<td id="power-ttyskeepawake"></td>
				</tr>
				<tr>
					<th data-i18n="power.displaysleep"></th>
					<td id="power-displaysleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.acwake"></th>
					<td id="power-acwake"></td>
				</tr>
				<tr>
					<th data-i18n="power.lidwake"></th>
					<td id="power-lidwake"></td>
				</tr>
				<tr>
					<th data-i18n="power.sleep_on_power_button"></th>
					<td id="power-sleep_on_power_button"></td>
				</tr>
				<tr>
					<th data-i18n="power.powernap"></th>
					<td id="power-powernap"></td>
				</tr>
				<tr>
					<th data-i18n="power.autorestart"></th>
					<td id="power-autorestart"></td>
				</tr>
				<tr>
					<th data-i18n="power.destroyfvkeyonstandby"></th>
					<td id="power-destroyfvkeyonstandby"></td>
				</tr>
			</table>
                <h2 data-i18n="power.thermal_load"></h2>
			<table class="table table-striped">
				<tr>
					<th data-i18n="power.cpu_scheduler_limit"></th>
					<td id="power-cpu_scheduler_limit"></td>
				</tr>
				<tr>
					<th data-i18n="power.cpu_available_cpus"></th>
					<td id="power-cpu_available_cpus"></td>
				</tr>
				<tr>
					<th data-i18n="power.cpu_speed_limit"></th>
					<td id="power-cpu_speed_limit"></td>
				</tr>
				<tr>
					<th data-i18n="power.combined_sys_load"></th>
					<td id="power-combined_sys_load"></td>
				</tr>
				<tr>
					<th data-i18n="power.user_sys_load"></th>
					<td id="power-user_sys_load"></td>
				</tr>
				<tr>
					<th data-i18n="power.battery_level"></th>
					<td id="power-battery_level"></td>
				</tr>
				<tr>
					<th data-i18n="power.thermal_level"></th>
					<td id="power-thermal_level"></td>
				</tr>
			</table>
                <h2 data-i18n="power.assertions"></h2>
			<table class="table table-striped">
				<tr>
					<th data-i18n="power.backgroundtask"></th>
					<td id="power-backgroundtask"></td>
				</tr>
				<tr>
					<th data-i18n="power.applepushservicetask"></th>
					<td id="power-applepushservicetask"></td>
				</tr>
				<tr>
					<th data-i18n="power.userisactive"></th>
					<td id="power-userisactive"></td>
				</tr>
				<tr>
					<th data-i18n="power.preventuseridledisplaysleep"></th>
					<td id="power-preventuseridledisplaysleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.preventsystemsleep"></th>
					<td id="power-preventsystemsleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.externalmedia"></th>
					<td id="power-externalmedia"></td>
				</tr>
				<tr>
					<th data-i18n="power.preventuseridlesystemsleep"></th>
					<td id="power-preventuseridlesystemsleep"></td>
				</tr>
				<tr>
					<th data-i18n="power.networkclientactive"></th>
					<td id="power-networkclientactive"></td>
				</tr>
				<tr>
					<th data-i18n="power.sleep_prevented_by"></th>
					<td id="power-sleep_prevented_by"></td>
				</tr>
			</table>
                <div id="power-ups" class="row hide">
                <h2 data-i18n="power.ups_status"></h2>
			<table class="table table-striped">
				<tr>
					<th data-i18n="power.ups_name"></th>
					<td id="power-ups_name"></td>
				</tr>
				<tr>
					<th data-i18n="power.ups_percent"></th>
					<td id="power-ups_percent"></td>
				</tr>
				<tr>
					<th data-i18n="power.ups_charging_status"></th>
					<td id="power-ups_charging_status"></td>
				</tr>
				<tr>
					<th data-i18n="power.haltlevel"></th>
					<td id="power-haltlevel"></td>
				</tr>
				<tr>
					<th data-i18n="power.haltafter"></th>
					<td id="power-haltafter"></td>
				</tr>
				<tr>
					<th data-i18n="power.haltremain"></th>
					<td id="power-haltremain"></td>
				</tr>
			</table>
         </div>
	</div>
</div>
<script>
$(document).on('appReady', function(e, lang) {
	
	// Get directory_service data
	$.getJSON( appUrl + '/module/power/get_data/' + serialNumber, function( data ) {
		if( ! data.hibernatefile){
			$('#power-msg').text(i18n.t('no_data'));
		}
		else{
			
			// Hide
			$('#power-msg').text('');
			$('#power-view').removeClass('hide');

			// Add strings

			$('#power-sleep_prevented_by').text(data.sleep_prevented_by);
			$('#power-hibernatefile').text(data.hibernatefile);
			$('#power-schedule').text(data.schedule);
			$('#power-combined_sys_load').text(data.combined_sys_load);
			$('#power-user_sys_load').text(data.user_sys_load);
			$('#power-thermal_level').text(data.thermal_level);
			$('#power-battery_level').text(data.battery_level);
  
			if(data.active_profile === "AC Power") {
				 $('#power-active_profile').text(i18n.t('power.ac_power'));
			} else if(data.active_profile === "Battery Power") {
				 $('#power-active_profile').text(i18n.t('power.battery_power'));
			} else{
				 $('#power-active_profile').text(data.active_profile);
			} 
            
			if(data.user_wake_count == "-9876543") {
				 $('#power-user_wake_count').text('');
			} else{
				 $('#power-user_wake_count').text(data.user_wake_count);
			}
                       
			if(data.dark_wake_count == "-9876543") {
				 $('#power-dark_wake_count').text('');
			} else{
				 $('#power-dark_wake_count').text(data.dark_wake_count);
			}
                          
			if(data.sleep_count == "-9876543") {
				 $('#power-sleep_count').text('');
			} else{
				 $('#power-sleep_count').text(data.sleep_count);
			}
                        
			if(data.cpu_available_cpus == "-9876543") {
				 $('#power-cpu_available_cpus').text('');
			} else{
				 $('#power-cpu_available_cpus').text(data.cpu_available_cpus);
			}
                        
			if(data.cpu_scheduler_limit == "-9876543") {
				 $('#power-cpu_scheduler_limit').text('');
			} else{
				 $('#power-cpu_scheduler_limit').text(data.cpu_scheduler_limit+'%');
			}

            
			if(data.cpu_speed_limit == "-9876543") {
				 $('#power-cpu_speed_limit').text('');
			} else{
				 $('#power-cpu_speed_limit').text(data.cpu_speed_limit+'%');
			}  

			if(data.hibernatemode == "25" || data.hibernatemode == "1") {
				 $('#power-hibernatemode').text(i18n.t('power.hibernate')+' ('+data.hibernatemode+')');
			} else if(data.hibernatemode == "3") {
				 $('#power-hibernatemode').text(i18n.t('power.safe_sleep')+' ('+data.hibernatemode+')');
			} else if(data.hibernatemode == "0") {
				 $('#power-hibernatemode').text(i18n.t('power.sleep')+' ('+data.hibernatemode+')');
			} else if(data.hibernatemode == "-9876543") {
				 $('#power-hibernatemode').text('');
			} else{
				 $('#power-hibernatemode').data.hibernatemode;
			}  
                          
			if(data.standbydelay == "-9876543") {
				 $('#power-standbydelay').text('');
			} else if(data.standbydelay == "0") {
				 $('#power-standbydelay').text(i18n.t('power.never'));
			} else {
				 $('#power-standbydelay').html('<span title="'+data.standbydelay+' '+i18n.t('power.seconds')+'">'+moment.duration(+data.standbydelay, "seconds").humanize()+'</span>');
			}  
                                      
			if(data.displaysleep == "-9876543") {
				 $('#power-displaysleep').text('');
			} else if(data.displaysleep == "0") {
				 $('#power-displaysleep').text(i18n.t('power.never'));
			} else {
				 $('#power-displaysleep').html('<span title="'+data.displaysleep+' '+i18n.t('power.minutes')+'">'+moment.duration(+data.displaysleep, "minutes").humanize()+'</span>');
			}  
                                                  
			if(data.disksleep == "-9876543") {
				 $('#power-disksleep').text('');
			} else if(data.disksleep == "0") {
				 $('#power-disksleep').text(i18n.t('power.never'));
			} else {
				 $('#power-disksleep').html('<span title="'+data.disksleep+' '+i18n.t('power.minutes')+'">'+moment.duration(+data.disksleep, "minutes").humanize()+'</span>');
			}  
                       
			if(data.autopoweroffdelay == "-9876543") {
				 $('#power-autopoweroffdelay').text('');
			} else if(data.autopoweroffdelay == "0") {
				 $('#power-autopoweroffdelay').text(i18n.t('power.never'));
			} else {
				 $('#power-autopoweroffdelay').html('<span title="'+data.autopoweroffdelay+' '+i18n.t('power.minutes')+'">'+moment.duration(+data.autopoweroffdelay, "minutes").humanize()+'</span>');
			}  
               
			if(data.sleep == "-9876543") {
				 $('#power-sleep').text('');
			} else if(data.sleep == "0") {
				 $('#power-sleep').text(i18n.t('power.never'));
			} else {
				 $('#power-sleep').html('<span title="'+data.sleep+' '+i18n.t('power.minutes')+'">'+moment.duration(+data.sleep, "minutes").humanize()+'</span>');
			} 
              
			if(data.gpuswitch == "2") {
				 $('#power-gpuswitch').text(i18n.t('power.auto_gpu'));
			} else if(data.gpuswitch == "1") {
				 $('#power-gpuswitch').text(i18n.t('power.discreet'));
			} else if(data.gpuswitch == "0") {
				 $('#power-gpuswitch').text(i18n.t('power.integrated'));
			} else{
				 $('#power-gpuswitch').text("");
			}  
                           
			if(data.standby == "1") {
				 $('#power-standby').text(i18n.t('yes'));
			} else if(data.standby == "0") {
				 $('#power-standby').text(i18n.t('no'));
			} else{
				 $('#power-standby').text("");
			}  
               
			if(data.halfdim == "1") {
				 $('#power-halfdim').text(i18n.t('yes'));
			} else if(data.halfdim == "0") {
				 $('#power-halfdim').text(i18n.t('no'));
			} else{
				 $('#power-halfdim').text("");
			}  
                         
			if(data.sms == "1") {
				 $('#power-sms').text(i18n.t('yes'));
			} else if(data.sms == "0") {
				 $('#power-sms').text(i18n.t('no'));
			} else{
				 $('#power-sms').text("");
			}  
                          
			if(data.networkoversleep == "1") {
				 $('#power-networkoversleep').text(i18n.t('yes'));
			} else if(data.networkoversleep == "0") {
				 $('#power-networkoversleep').text(i18n.t('no'));
			} else{
				 $('#power-networkoversleep').text("");
			}  
                        
			if(data.autopoweroff == "1") {
				 $('#power-autopoweroff').text(i18n.t('yes'));
			} else if(data.autopoweroff == "0") {
				 $('#power-autopoweroff').text(i18n.t('no'));
			} else{
				 $('#power-autopoweroff').text("");
			}  
                      
			if(data.ttyskeepawake == "1") {
				 $('#power-ttyskeepawake').text(i18n.t('yes'));
			} else if(data.ttyskeepawake == "0") {
				 $('#power-ttyskeepawake').text(i18n.t('no'));
			} else{
				 $('#power-ttyskeepawake').text("");
			}   
                       
			if(data.acwake == "1") {
				 $('#power-acwake').text(i18n.t('yes'));
			} else if(data.acwake == "0") {
				 $('#power-acwake').text(i18n.t('no'));
			} else{
				 $('#power-acwake').text("");
			}  
                        
			if(data.lidwake == "1") {
				 $('#power-lidwake').text(i18n.t('yes'));
			} else if(data.lidwake == "0") {
				 $('#power-lidwake').text(i18n.t('no'));
			} else{
				 $('#power-lidwake').text("");
			}  
                        
			if(data.sleep_on_power_button == "1") {
				 $('#power-sleep_on_power_button').text(i18n.t('yes'));
			} else if(data.sleep_on_power_button == "0") {
				 $('#power-sleep_on_power_button').text(i18n.t('no'));
			} else{
				 $('#power-sleep_on_power_button').text("");
			}  
                        
			if(data.autorestart == "1") {
				 $('#power-autorestart').text(i18n.t('yes'));
			} else if(data.autorestart == "0") {
				 $('#power-autorestart').text(i18n.t('no'));
			} else{
				 $('#power-autorestart').text("");
			}  
                       
			if(data.destroyfvkeyonstandby == "1") {
				 $('#power-destroyfvkeyonstandby').text(i18n.t('yes'));
			} else if(data.destroyfvkeyonstandby == "0") {
				 $('#power-destroyfvkeyonstandby').text(i18n.t('no'));
			} else{
				 $('#power-destroyfvkeyonstandby').text("");
			}  
                       
			if(data.powernap == "1") {
				 $('#power-powernap').text(i18n.t('yes'));
			} else if(data.powernap == "0") {
				 $('#power-powernap').text(i18n.t('no'));
			} else{
				 $('#power-powernap').text("");
			}  
                        
			if(data.backgroundtask == "1") {
				 $('#power-backgroundtask').text(i18n.t('yes'));
			} else if(data.backgroundtask == "0") {
				 $('#power-backgroundtask').text(i18n.t('no'));
			} else{
				 $('#power-backgroundtask').text("");
			}  
                     
			if(data.applepushservicetask == "1") {
				 $('#power-applepushservicetask').text(i18n.t('yes'));
			} else if(data.applepushservicetask == "0") {
				 $('#power-applepushservicetask').text(i18n.t('no'));
			} else{
				 $('#power-applepushservicetask').text("");
			}    
                       
			if(data.userisactive == "1") {
				 $('#power-userisactive').text(i18n.t('yes'));
			} else if(data.userisactive == "0") {
				 $('#power-userisactive').text(i18n.t('no'));
			} else{
				 $('#power-userisactive').text("");
			}    
                         
			if(data.preventuseridledisplaysleep == "1") {
				 $('#power-preventuseridledisplaysleep').text(i18n.t('yes'));
			} else if(data.preventuseridledisplaysleep == "0") {
				 $('#power-preventuseridledisplaysleep').text(i18n.t('no'));
			} else{
				 $('#power-preventuseridledisplaysleep').text("");
			}    
                         
			if(data.preventsystemsleep == "1") {
				 $('#power-preventsystemsleep').text(i18n.t('yes'));
			} else if(data.preventsystemsleep == "0") {
				 $('#power-preventsystemsleep').text(i18n.t('no'));
			} else{
				 $('#power-preventsystemsleep').text("");
			}    
                        
			if(data.externalmedia == "1") {
				 $('#power-externalmedia').text(i18n.t('yes'));
			} else if(data.externalmedia == "0") {
				 $('#power-externalmedia').text(i18n.t('no'));
			} else{
				 $('#power-externalmedia').text("");
			}    
                        
			if(data.preventuseridlesystemsleep == "1") {
				 $('#power-preventuseridlesystemsleep').text(i18n.t('yes'));
			} else if(data.preventuseridlesystemsleep == "0") {
				 $('#power-preventuseridlesystemsleep').text(i18n.t('no'));
			} else{
				 $('#power-preventuseridlesystemsleep').text("");
			}    
            
			if(data.networkclientactive == "1") {
				 $('#power-networkclientactive').text(i18n.t('yes'));
			} else if(data.networkclientactive == "0") {
				 $('#power-networkclientactive').text(i18n.t('no'));
			} else{
				 $('#power-networkclientactive').text("");
			}  
            
			if(data.womp == "1") {
				 $('#power-womp').text(i18n.t('yes'));
			} else if(data.womp == "0") {
				 $('#power-womp').text(i18n.t('no'));
			} else{
				 $('#power-womp').text("");
			}
            
            // Unhide and fill out UPS if UPS is present
            if (data.ups_percent != "-9876543" && (data.ups_percent)) {
	        	$('#power-ups').removeClass('hide'); // unhide UPS table
	        	$('#power-ups_percent').text(data.ups_percent+'%');
	        	$('#power-haltlevel').text(data.haltlevel+'%');
	        	//$('#power-haltafter').text(data.haltafter);
	        	//$('#power-haltremain').text(data.haltremain);
	        	//$('#power-ups_charging_status').text(data.ups_charging_status);
	        	$('#power-ups_name').text(data.ups_name);
                
			if(data.ups_charging_status === "true " ) {
				 $('#power-ups_charging_status').text(i18n.t('power.charging'));
			} else if(data.ups_charging_status === "false") {
				 $('#power-ups_charging_status').text(i18n.t('power.discharging'));
			} else{
				 $('#power-ups_charging_status').text(data.ups_charging_status);
			} 
                
			if(data.haltafter == "-9876543") {
				 $('#power-haltafter').text('');
			} else if(data.haltafter == "1") {
				 $('#power-haltafter').text(data.haltafter+' '+i18n.t('power.minute'));
			} else{
				 $('#power-haltafter').text(data.haltafter+' '+i18n.t('power.minutes'));
			}
                
			if(data.haltremain == "-9876543") {
				 $('#power-haltremain').text('');
			} else if(data.haltremain == "1") {
				 $('#power-haltremain').text(data.haltremain+' '+i18n.t('power.minute'));
			} else{
				 $('#power-haltremain').text(data.haltremain+' '+i18n.t('power.minutes'));
			}
                
            } else {
	        	$('#power-ups_percent').html('');  
	        	$('#power-haltlevel').html('');
	        	$('#power-haltafter').html('');
	        	$('#power-haltremain').html('');
	        	$('#power-ups_charging_status').text('');
	        	$('#power-ups_name').text("");

            }
		}
	});
});

</script>