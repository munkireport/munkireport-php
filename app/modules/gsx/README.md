GSX module
==============

Updates warranty from Apple, designed as a warranty module replacement 

The GSX table provides the following information:

- Warranty status
- Coverage end date
- Coverage start date
- Days of coverage remaining, as last pulled from GSX
- Estimated purchase date
- Country of purchase
- Registration date
- Product decryption
- Shipping configuration
- Contract coverage end date
- Contract coverage start date
- Warranty contract type
- Labor covered
- Parts covered
- Warranty Service Level Agreement
- Is Mac a GSX loaner Mac
- Human readable warranty status
- Is vintage Mac
- Is obsolete Mac

The GSX module also updates the warranty and machine tables with the following:

- Purchase date
- Warranty end date
- Warranty status
- Product description

-- 

Data can be viewed under the GSX tab on the client details page or using the GSX listings view

Remarks
---

* Requires the SOAP extension installed in php http://php.net/manual/en/book.soap.php
* The client triggers the server to do a lookup once a day
* Obsolete Macs are not available from Apple and are instead processed using the warranty module's backend

Configuration
---

Before you use the GSX module, you need to configure the config.php file with your GSX account information.
See: https://github.com/munkireport/munkireport-php/blob/master/config_default.php#L263-L290

Making the certbundle.pem
---

These steps assume you've created your SSL certifcates using https://www.watchmanmonitoring.com/generating-ssl-certificates-to-meet-applecares-august-2015-requirements/

When creating the certbundle.pem, you must have the six signed pems sent back from Apple as well as the four gsx-* files generated by you that you sent to Apple. First put all 10 files into a folder. Let's call it GSX-Certs. 

Within the GSX-Certs folder, you need to cat your gsx-production.key and the Applecare-XXXX-Prod.apple.com.chain.pem together to form the bundle. In Terminal, cd to the GSX-Certs folder. Then run "cat Applecare-APP1234-0000123456.Prod.apple.com.chain.pem gsx-production.key > certbundle.pem" making sure to put your Applecare and sold to number in place of the example numbers. 

This will output a certbundle.pem file that is roughly 6.1KB in size. Treat this file and the rest of the GSX certificates as passwords. Protect them. All that's left is to make sure that the certbundle.pem contains the proper data, example below, and point MunkiReport to where it's stored in a web server readable place in the config.php with the gsx_cert parameter.

Addtional material can be found at https://github.com/filipp/gsxlib#q-how-do-i-create-the-necessary-pem-file

Example certbundle.pem:

-----BEGIN CERTIFICATE-----
BLASOQ()*Q#()**)REW)*(EW*)*E)WUR)*EW(UR)
...
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
0990320003q43090435J403439590S-S=DS=-
...
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
)_#_)#)$IK_#@))KDE_)FD_SF)DSF_DS)FDS_FDSFSD
....
-----END CERTIFICATE-----
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: ....
DEK-Info: ...
BUNCH OF GIBBERISH
-----END RSA PRIVATE KEY-----
